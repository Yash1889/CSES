#include <bits/stdc++.h>
using namespace std;
 
int main(){
    int n,m;
    cin>>n>>m;
    vector<string> grid(n);
    for(int i=0;i<n;i++){
        cin>>grid[i];
    }
 
    vector<int> dx = {-1,1,0,0};
    vector<int> dy = {0,0,1,-1};
    vector<char> dir = {'U','D','R','L'};
 
    vector<vector<int>> monsterTime(n,vector<int> (m, INT_MAX));
    queue<pair<int,int>> q;
 
    int sx=-1,sy=-1;
    for(int i=0;i<n;i++){
        for(int j=0;j<m;j++){
            if(grid[i][j]=='M'){
                monsterTime[i][j] = 0;
                q.push({i,j});
            }
            if(grid[i][j]=='A'){
                sx = i;
                sy = j;
            }
        }
    }
 
    while(!q.empty()){
        auto[x,y] = q.front();
        q.pop();
        for(int d=0;d<4;d++){
            int nx = x+dx[d];
            int ny = y+dy[d];
            if(nx<0 || ny<0 || nx>=n || ny>=m)continue;
            if(grid[nx][ny]=='#')continue;
            if(monsterTime[nx][ny]>monsterTime[x][y]+1){
                monsterTime[nx][ny] = monsterTime[x][y]+1;
                q.push({nx,ny});
            }
        }
    }
 
    vector<vector<int>> dist(n,vector<int> (m,-1));
    vector<vector<char>> parent(n,vector<char> (m));
    queue<pair<int,int>> qa;
 
    dist[sx][sy] = 0;
    qa.push({sx,sy});
 
    pair<int,int> escape = {-1,-1};
 
    while(!qa.empty()){
        auto[x,y] = qa.front();
        qa.pop();
 
        if(x==0 || y==0 || x==n-1 || y==m-1){
            escape = {x,y};
            break;
        }
 
        for(int d=0;d<4;d++){
            int nx = x+dx[d];
            int ny = y+dy[d];
            if(nx<0 || ny<0 || nx>=n || ny>=m)continue;
            if(grid[nx][ny]=='#')continue;
            if(dist[nx][ny]!=-1)continue;
 
            if(dist[x][y]+1<monsterTime[nx][ny]){
                dist[nx][ny] = dist[x][y]+1;
                parent[nx][ny] = dir[d];
                qa.push({nx,ny});
            }
        }
    }
 
    if(escape.first==-1){
        cout<<"NO\n";
        return 0;
    }
 
    cout<<"YES\n";
    string path;
    int x = escape.first,y = escape.second;
    while(x!=sx || y!=sy){
        char c = parent[x][y];
        path.push_back(c);
        if(c=='U')x++;
        else if(c=='D')x--;
        else if(c=='R')y--;
        else if(c=='L')y++;
    }
    reverse(path.begin(),path.end());
    cout<<path.size()<<"\n";
    cout<<path<<"\n";
}
